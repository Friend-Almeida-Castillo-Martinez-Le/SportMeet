<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns="http://www.w3.org/1999/html">
<head th:replace="fragments/partials :: head('Player Profile')">

</head>
<body id="body">
<nav th:replace="fragments/partials :: navbar"/>
<div sec:authorize="isAuthenticated()">
    User ID: <span th:text="${#authentication.principal.id}"/>
    Username: <span th:text="${#authentication.principal.username}"/>
    Email: <span th:text="${#authentication.principal.email}"/>
</div>
<div id="card-2">
    <div id="card-1">
        <h1 id="title"></h1>
        <div th:if="${player.profilePicUrl != null}">
            <img th:src="${player.profilePicUrl}" alt="profile-picture"
                 style="height: 120px;width: 120px;border-radius: 100%">
            <br>
        </div>
        <br>
        <div>
            <div id="container">
                <h6 th:text="${player.firstName} + ' ' + ${player.lastName}"></h6>
                <h6 th:text="'@' + ${player.username}"></h6>
            </div>

            <th:block sec:authorize="isAuthenticated()">
                <div th:if="${player.id == #authentication.principal.id}">
                    <a th:href="@{/profile/{id}/upload (id = ${player.id})}" th:value="${player.id}" type="button"
                       th:name="upload">Change Profile Picture</a>
                </div>
            </th:block>
            <th:block sec:authorize="isAuthenticated()">
                <div th:if="${player.id == #authentication.principal.id}">
                    <a th:href="@{/player/{id}/edit (id = ${player.id})}" th:value="${player.id}" type="button"
                       th:name="edit">Edit Profile</a>
                </div>
            </th:block>
            <h5 class="fonts" style="text-decoration: underline">HOSTING:</h5>
            <div class="fonts" th:object="${player}">
                <div th:each="event: ${player.getEvents()}">
                    <a th:href="@{/event/{id} (id = ${event.id})}" th:text="'- ' + ${event.title}"
                       class="hover" style="color: black;text-transform: capitalize"></a>
                </div>
            </div>
            <h5 class="fonts" style="text-decoration: underline">ATTENDING:</h5>
            <div  class="fonts" th:object="${player}">
                <div th:each="event: ${player.getAttendingEvents()}">
                    <a th:href="@{/event/{id} (id = ${event.id})}" th:text="'- ' + ${event.title}"
                      class="hover" style="color: black; text-transform: capitalize" ></a>
                </div>
            </div>
            <h5 style="text-decoration: underline">My Ratings:</h5>
                <div th:each="rating: ${allratings}">
                    Event ID: <span th:text="${rating.event.id}"></span> | Rater: <span th:text="${rating.rater.username}"></span> | Score: <span th:text="${rating.rating}"></span>
                </div>
            <h5 style="text-decoration: underline">Team Member Ratings:</h5>
            <div th:each="rating: ${teamratings}">
                <form th:action="@{/rating/{id}/edit (id = ${rating.id})}" method="post">
                    Event ID: <span th:text="${rating.event.id}"></span> | Team member: <span th:text="${rating.ratee.username}"></span> <br>
                    <label for="score">Score(0-5): </label>
                    <input type="number" id="score" name="rating" min="0" max="5" th:value="${rating.rating}">
                    <button type="submit" class="btn btn-success" >Submit</button>
                </form>

            </div>


        </div>
    </div>
</div>
<!-- Bootstrap Bundle with Popper -->

<!--Personal custom JS script-->
</body>
</html>

